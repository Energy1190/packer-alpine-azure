{
    "builders": [
        {
            "type": "qemu",
            "accelerator": "kvm",
            "iso_url": "http://dl-cdn.alpinelinux.org/alpine/v3.8/releases/x86_64/alpine-virt-3.8.1-x86_64.iso",
            "iso_checksum": "83ede521b174d99a0975c3653e7310b58075fa68fb773ed6995b974a44df60ce",
            "iso_checksum_type": "sha256",
            "disk_size": "512",
            "skip_compaction": "true",
            "communicator": "ssh",
            "ssh_username": "root",
            "ssh_password": "alpine",
            "http_directory": "http",
            "http_port_min": "8080",
            "http_port_max": "8080",
            "boot_wait": "20s",
            "boot_command": [
                "root<enter><wait>",
                "ifconfig eth0 up && udhcpc -i eth0<enter><wait10>",
                "wget http://{{ .HTTPIP }}:{{ .HTTPPort }}/answers<enter><wait>",
                "setup-alpine -f answers<enter><wait5>",
                "alpine<enter><wait>",
                "alpine<enter><wait>",
                "<wait10><wait10><wait10>",
                "y<enter>",
                "<wait10><wait10><wait10>",
                "<wait10><wait10><wait10>",
                "rc-service sshd stop<enter>",
                "mount /dev/vda2 /mnt<enter>",
                "echo 'PermitRootLogin yes' >> /mnt/etc/ssh/sshd_config<enter>",
                "umount /mnt<enter>",
                "eject -s /dev/cdrom<enter>",
                "reboot<enter>",
                "<wait10><wait10><wait10><wait10>",
                "root<enter><wait>",
                "alpine<enter><wait>",
                "apk add hvtools<enter><wait>",
                "rc-update add hv_fcopy_daemon default<enter><wait>",
                "rc-update add hv_kvp_daemon default<enter><wait>",
                "rc-update add hv_vss_daemon default<enter><wait>"
            ],
            "shutdown_command": "poweroff"
        }
    ],
    "provisioners": [
        {
            "type": "file",
            "source": "useradd.sh",
            "destination": "/tmp/useradd.sh"
        },
        {
            "type": "shell",
            "script": "provision.sh"
        }
    ]
}
